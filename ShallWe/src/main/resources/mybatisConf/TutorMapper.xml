<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TutorMapper">

	<resultMap type="Tutor" id="tutor" autoMapping="true">
		<id property="member.member_id" column="tutor_id"/>
		<id property="lectureCategory.lecture_category_id" column="tutor_category_id"/>
		
		<result property="tutor_nickname" column="tutor_nickname"/>
		<result property="tutor_img" column="tutor_img"/>
		<result property="tutor_career_file" column="tutor_career_file"/>
		<result property="tutor_introduce" column="tutor_introduce"/>
		<result property="tutor_link" column="tutor_link"/>
		<result property="tutor_score" column="tutor_score"/>
		
		<association property="member" javaType="Member" autoMapping="true">
			<id property="member_id" column="tutor_id"/>
		</association>
		<association property="lectureCategory" javaType="LectureCategory" autoMapping="true">
			<id property="lecture_category_id" column="tutor_category_id"/>
			<result property="lecture_category_name" column="category_name"/>
		</association>
	</resultMap>

<!-- jun6 : 예비/전체 강사 list 출력 -->
	<select id="selectAllTutor" parameterType="String" resultMap="tutor">
		SELECT tu.*, lc.category_name, me.member_name
		FROM tutor tu
		    JOIN member me ON (tu.tutor_id = me.member_id)
		    JOIN lecture_category lc ON (tu.tutor_category_id = lc.category_id)
		WHERE me.tutor_YN = #{YN}
	</select>
	
	<insert id="insertTutor" parameterType="Tutor">
	INSERT INTO TUTOR
				(TUTOR_ID,TUTOR_CATEGORY_ID,TUTOR_IMG,TUTOR_CAREER_FILE,tutor_introduce,TUTOR_LINK,TUTOR_SCORE,TUTOR_NICKNAME) 
				VALUES(#{member.member_id},UPPER(#{lectureCategory.lecture_category_id}),#{tutor_img},
				#{tutor_career_file},#{tutor_introduce},#{tutor_link},#{tutor_score},#{tutor_nickname})
	</insert>
	<select id="selectTutorInfo" resultType="tutor">
	
		SELECT ME.MEMBER_NAME, TU.*,ME.MEMBER_EMAIL,ME.MEMBER_PHONE
		FROM TUTOR TU JOIN MEMBER ME ON(TU.TUTOR_ID = ME.MEMBER_ID)
		WHERE TU.TUTOR_ID = #{tutor_id}

	</select>
	
	
</mapper>