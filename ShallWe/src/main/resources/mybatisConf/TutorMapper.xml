<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TutorMapper">

	<resultMap type="Tutor" id="tutor" autoMapping="true">
		<id property="member.member_id" column="tutor_id"/>
		<id property="lecture_category.lecture_category_id" column="tutor_category_id"/>
		
		<result property="tutor_nickname" column="tutor_nickname"/>
		<result property="tutor_img" column="tutor_img"/>
		<result property="tutor_career_file" column="tutor_career_file"/>
		<result property="tutor_introduce" column="tutor_introduce"/>
		<result property="tutor_link" column="tutor_link"/>
		<result property="tutor_score" column="tutor_score"/>
		
		<association property="member" javaType="Member" autoMapping="true">
			<id property="member_id" column="tutor_id"/>
		</association>
		<association property="lecture_category" javaType="LectureCategory" autoMapping="true">
			<id property="lecture_category_id" column="tutor_category_id"/>
		</association>
	</resultMap>

<!-- jun6 : 예비강사 list 출력 -->
	<select id="selectAllPreTutor" resultMap="tutor">
		SELECT *
		FROM tutor tu
		    JOIN member me ON (tu.tutor_id = me.member_id)
		WHERE me.tutor_YN = 'N'
	</select>
	
<!-- jun6 : 예비강사 승인/반려 -->
	<update id="updateTutorState" parameterType="map">
		UPDATE member
	 	SET tutor_yn = #{status}
 		WHERE member_id = #{id}
	</update>
	
</mapper>